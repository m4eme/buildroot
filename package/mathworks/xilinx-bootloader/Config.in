config BR2_PACKAGE_XILINX_BOOTLOADER
	bool "Xilinx Bootloader Configuration"
	depends on BR2_TARGET_UBOOT
	depends on (BR2_aarch64 \
			&& (BR2_TARGET_UBOOT_FORMAT_BIN \
			|| BR2_TARGET_UBOOT_FORMAT_ELF)) \
		|| (BR2_arm \
			&& (BR2_TARGET_UBOOT_FORMAT_IMG \
			|| BR2_TARGET_UBOOT_FORMAT_ELF))
	help
	  Build SPL based on Vivado handoff files

if BR2_PACKAGE_XILINX_BOOTLOADER
menu "Xilinx Bootloader Options"

choice
	prompt "Xilinx FSBL Type"
	help
	  Select the type of FSBL to use

config BR2_PACKAGE_XILINX_BOOTLOADER_FSBL_SDK
	bool "SDK FSBL"
	depends on BR2_TARGET_UBOOT_FORMAT_ELF

config BR2_PACKAGE_XILINX_BOOTLOADER_UBOOT_SPL
	bool "U-Boot SPL"
	depends on (BR2_TARGET_UBOOT_FORMAT_BIN \
		|| BR2_TARGET_UBOOT_FORMAT_IMG)
	depends on BR2_TARGET_UBOOT_SPL

endchoice

config BR2_PACKAGE_XILINX_BOOTLOADER_PLATFORM
	string
	default "zynq"		if BR2_arm
	default "zynqmp"	if BR2_aarch64

config BR2_PACKAGE_XILINX_BOOTLOADER_PMUFW
	bool "Include PMU Firmware in boot.bin"
	depends on BR2_aarch64
	help
	  Build the PMU Firmware into the boot.bin file

config BR2_PACKAGE_XILINX_BOOTLOADER_PMUFW_PATH
	string "PMU Firmware"
	depends on BR2_PACKAGE_XILINX_BOOTLOADER_PMUFW
	help
	  Path to the PMU firmware binary.
	  
	  If using the Vivado FSBL, this should be the elf file generated
	  by Vivado SDK
	  
	  If using the U-Boot SPL, this file should be generated by
	  running "mb-objcopy -O binary" on the firmware elf file generated
	  by Vivado SDK

if BR2_PACKAGE_XILINX_BOOTLOADER_FSBL_SDK

config BR2_PACKAGE_XILINX_BOOTLOADER_BOOTGEN_PATH
	string "Xilinx bootgen path"
	default "/opt/Xilinx/SDK/2018.2/bin/bootgen"
	help
	  Path to the Xilinx bootgen tool

config BR2_PACKAGE_XILINX_BOOTLOADER_FSBL_ELF_PATH
	string "FSBL Elf"
	help
	  Path to the FSBL elf file.

endif

if BR2_PACKAGE_XILINX_BOOTLOADER_UBOOT_SPL

config BR2_PACKAGE_XILINX_BOOTLOADER_VIVADO_HANDOFF_DIR
	string "Vivado Handoff Files Location"
	help
	  The location of the Vivado handoff files generated during
	  fpga image compilation

	  This can be an absolute path, or relative to the buildroot
	  root directory.

config BR2_PACKAGE_XILINX_BOOTLOADER_UBOOT_TARGET_DIR
	string "U-Boot Target Directory"
	default "board/xilinx/zynq/zynq-zed"
	help
	  The locationin the U-Boot tree to copy the handoff files

endif

endmenu #"Xilinx U-Boot Options"
endif #BR2_PACKAGE_XILINX_BOOTLOADER
